{
  "project": "TIP - Travel Intelligence & Planner",
  "version": "2.0.9",
  "lastUpdated": "2025-12-26T04:35:00Z",
  "structure": "I1-I10 Increments (unified FE+BE)",
  "notes": [
    "This file now uses the INTEGRATED_PLAN.md I1-I10 increment structure",
    "Each increment includes both frontend AND backend tasks",
    "The old P0-P15 phase system is deprecated (see Legacy Phase Mapping in INTEGRATED_PLAN.md)",
    "Mark 'passes': true only when BOTH frontend AND backend are complete"
  ],
  "summary": {
    "totalIncrements": 10,
    "totalFeatures": 104,
    "completedFeatures": 70,
    "percentComplete": 67
  },
  "increments": [
    {
      "id": "I1",
      "name": "Foundation and Infrastructure",
      "description": "Baseline FE/BE architecture, design tokens, routing, shell, and infrastructure",
      "status": {
        "frontend": 100,
        "backend": 60,
        "infrastructure": 100,
        "overall": 90
      },
      "features": [
        {
          "id": "I1-FE-01",
          "name": "Initialize Next.js 14+ App Router",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-FE-02",
          "name": "Configure Tailwind CSS with design tokens",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-FE-03",
          "name": "Set up shadcn/ui components",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-FE-04",
          "name": "Create AppShell component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I1-FE-05",
          "name": "Create MainNav component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I1-FE-06",
          "name": "Create UserMenu component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I1-FE-07",
          "name": "Set up route structure (app)/(auth)",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-BE-01",
          "name": "Initialize FastAPI project",
          "type": "backend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-BE-02",
          "name": "Configure CORS for frontend",
          "type": "backend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-BE-03",
          "name": "Create health endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I1-BE-04",
          "name": "Set up Supabase client",
          "type": "backend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-DB-01",
          "name": "Create database schema",
          "type": "database",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-DB-02",
          "name": "Configure RLS policies",
          "type": "database",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I1-INFRA-01",
          "name": "Configure Redis instance",
          "type": "infrastructure",
          "passes": true,
          "priority": "high",
          "implementation": "Docker Compose with Redis 7 Alpine"
        },
        {
          "id": "I1-INFRA-02",
          "name": "Set up Celery workers",
          "type": "infrastructure",
          "passes": true,
          "priority": "high",
          "implementation": "Celery worker + Beat + Flower via Docker Compose"
        },
        {
          "id": "I1-INFRA-03",
          "name": "Create Docker Compose for local dev",
          "type": "infrastructure",
          "passes": true,
          "priority": "medium",
          "implementation": "5 services: Redis, Backend, Celery Worker, Beat, Flower"
        },
        {
          "id": "I1-INFRA-04",
          "name": "Set up CI/CD pipeline (GitHub Actions)",
          "type": "infrastructure",
          "passes": true,
          "implementation": "GitHub Actions with backend-ci, frontend-ci, and full-stack workflows",
          "priority": "medium"
        }
      ]
    },
    {
      "id": "I2",
      "name": "Authentication and Account Management",
      "description": "Supabase Auth flows with Google OAuth and email/password",
      "status": {
        "frontend": 100,
        "backend": 50,
        "overall": 80
      },
      "features": [
        {
          "id": "I2-FE-01",
          "name": "Create login page",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I2-FE-02",
          "name": "Create signup page",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I2-FE-03",
          "name": "Create forgot-password page",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I2-FE-04",
          "name": "Create reset-password page",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I2-FE-05",
          "name": "Create verify-email page",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I2-FE-06",
          "name": "Implement OAuth callback handler",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I2-FE-07",
          "name": "Create auth middleware",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I2-FE-08",
          "name": "Implement rate limiting (client-side)",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I2-BE-01",
          "name": "Implement JWT verification",
          "type": "backend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I2-BE-02",
          "name": "Create user profile sync on login",
          "type": "backend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I2-CONFIG-01",
          "name": "Configure Google OAuth in Supabase",
          "type": "config",
          "passes": false,
          "priority": "high",
          "blockedBy": "Requires user to add OAuth credentials in Supabase dashboard"
        }
      ]
    },
    {
      "id": "I3",
      "name": "Dashboard and Home",
      "description": "Post-login dashboard with stats, recent trips, and quick actions",
      "status": {
        "frontend": 90,
        "backend": 40,
        "overall": 65
      },
      "features": [
        {
          "id": "I3-FE-01",
          "name": "Create dashboard page layout",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I3-FE-02",
          "name": "Create TripCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-03",
          "name": "Create EmptyState component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-04",
          "name": "Create QuickActionsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-05",
          "name": "Create StatisticsSummaryCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-06",
          "name": "Create RecentTripsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-07",
          "name": "Create UpcomingTripsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-FE-08",
          "name": "Create RecommendationsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "medium"
        },
        {
          "id": "I3-FE-09",
          "name": "Implement loading skeletons",
          "type": "frontend",
          "passes": true,
          "priority": "medium"
        },
        {
          "id": "I3-FE-10",
          "name": "Implement error boundary",
          "type": "frontend",
          "passes": true,
          "priority": "medium"
        },
        {
          "id": "I3-BE-01",
          "name": "Implement GET /trips endpoint",
          "type": "backend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I3-BE-02",
          "name": "Implement GET /profile endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I3-BE-03",
          "name": "Implement GET /recommendations endpoint",
          "type": "backend",
          "passes": false,
          "priority": "medium",
          "note": "Currently uses hardcoded static data, not AI-powered"
        }
      ]
    },
    {
      "id": "I4",
      "name": "Trip Creation and Input",
      "description": "Multi-step trip creation wizard with drafts and validation",
      "status": {
        "frontend": 100,
        "backend": 100,
        "overall": 100
      },
      "features": [
        {
          "id": "I4-FE-01",
          "name": "Create trip wizard container",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I4-FE-02",
          "name": "Create step 1: Traveler details",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I4-FE-03",
          "name": "Create step 2: Destinations",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I4-FE-04",
          "name": "Create step 3: Trip details (dates, budget)",
          "type": "frontend",
          "passes": true,
          "priority": "critical"
        },
        {
          "id": "I4-FE-05",
          "name": "Create step 4: Preferences",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I4-FE-06",
          "name": "Implement form validation (Zod)",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "note": "Comprehensive Zod schemas implemented for all 4 steps with validation before navigation and form submission"
        },
        {
          "id": "I4-FE-07",
          "name": "Implement draft auto-save",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I4-BE-01",
          "name": "Implement POST /trips endpoint",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "note": "Created with idempotency support and comprehensive validation"
        },
        {
          "id": "I4-BE-02",
          "name": "Implement PUT /trips/{id} endpoint",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "note": "Implemented with partial update support and status validation"
        },
        {
          "id": "I4-BE-03",
          "name": "Implement DELETE /trips/{id} endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "note": "Implemented with status-based deletion restrictions"
        },
        {
          "id": "I4-BE-04",
          "name": "Add idempotency support for create",
          "type": "backend",
          "passes": true,
          "priority": "medium",
          "note": "Implemented via X-Idempotency-Key header"
        },
        {
          "id": "I4-BE-05",
          "name": "Implement POST /trips/{id}/generate endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "note": "Celery task integration for AI report generation"
        },
        {
          "id": "I4-BE-06",
          "name": "Implement GET /trips/{id}/status endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "note": "Real-time generation status tracking with agent progress"
        },
        {
          "id": "I4-BE-07",
          "name": "Implement draft management endpoints",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "note": "POST, GET, PUT, DELETE /api/trips/drafts fully implemented"
        },
        {
          "id": "I4-BE-08",
          "name": "Create comprehensive backend tests",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "note": "60+ test cases covering all endpoints and edge cases"
        }
      ]
    },
    {
      "id": "I5",
      "name": "Visa and Entry Intelligence",
      "description": "Visa requirements with agent pipeline foundation (CRITICAL)",
      "status": {
        "frontend": 100,
        "backend": 100,
        "agents": 20,
        "integration": 100,
        "overall": 75
      },
      "features": [
        {
          "id": "I5-FE-01",
          "name": "Create visa section page",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "Trip report page at /trips/[id] with visa intelligence display using Modern Cartography design"
        },
        {
          "id": "I5-FE-02",
          "name": "Create VisaRequirements component",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "VisaRequirementsSection with passport-inspired design, visa status, application details, document checklist"
        },
        {
          "id": "I5-FE-03",
          "name": "Create ConfidenceBadge component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "ConfidenceBadge & ConfidenceStamp with official/third-party/uncertain levels and travel-themed stamps"
        },
        {
          "id": "I5-FE-04",
          "name": "Create SourceAttribution component",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "SourceAttribution with compact and detailed variants, government/embassy/third-party badges"
        },
        {
          "id": "I5-FE-05",
          "name": "Create visa loading/progress states",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "VisaLoadingAnimation, VisaSectionSkeleton, VisaErrorState with airplane animation and shimmer effects"
        },
        {
          "id": "I5-BE-01",
          "name": "Create BaseAgent class",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "implementation": "BaseAgent abstract class with AgentConfig, AgentResult, SourceReference interfaces. Includes comprehensive test suite (12 tests passing)."
        },
        {
          "id": "I5-BE-02",
          "name": "Create Orchestrator agent",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "implementation": "OrchestratorAgent with phased execution (4 phases), async parallel processing, error recovery, result aggregation, and database integration. Includes 14 comprehensive tests. Ready for production use with VisaAgent."
        },
        {
          "id": "I5-BE-03",
          "name": "Create Celery task for agent jobs",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "implementation": "execute_visa_agent Celery task with CrewAI + Travel Buddy AI integration, Supabase storage, and comprehensive error handling. Stores results in report_sections table."
        },
        {
          "id": "I5-AGENT-01",
          "name": "Implement VisaAgent core logic",
          "type": "agent",
          "passes": true,
          "priority": "critical",
          "implementation": "Production-ready VisaAgent using CrewAI with Travel Buddy AI integration. Includes visa requirement analysis, entry conditions, processing times, and source attribution with >95% accuracy target."
        },
        {
          "id": "I5-AGENT-02",
          "name": "Integrate Sherpa API or IATA",
          "type": "agent",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I5-AGENT-03",
          "name": "Implement visa classification logic",
          "type": "agent",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I5-AGENT-04",
          "name": "Add source attribution",
          "type": "agent",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I5-AGENT-05",
          "name": "Implement confidence scoring",
          "type": "agent",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I5-BE-04",
          "name": "Implement GET /trips/{id}/report/visa",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "implementation": "Complete API endpoint with auth, ownership verification, error handling, and response models"
        },
        {
          "id": "I5-INT-01",
          "name": "Integrate Visa Agent with Report UI",
          "type": "integration",
          "passes": true,
          "priority": "critical",
          "implementation": "Created visa.ts API client with fetchVisaReport(), generateVisaReport(), and checkGenerationStatus(). Updated trips/[id]/page.tsx to fetch from API with fallback to mock data. Added error handling for REPORT_NOT_FOUND and FETCH_ERROR states with user-friendly messages and actions."
        }
      ]
    },
    {
      "id": "I6",
      "name": "Destination Intelligence",
      "description": "Country, weather, currency, culture, food intelligence cards",
      "status": {
        "frontend": 100,
        "backend": 20,
        "agents": 100,
        "integration": 100,
        "overall": 80
      },
      "features": [
        {
          "id": "I6-FE-01",
          "name": "Create destination section page",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "DestinationIntelligencePage container with masonry grid layout, expandable card management, and demo page at /trips/destination. Includes LoadingState skeleton component."
        },
        {
          "id": "I6-FE-02",
          "name": "Create CountryCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "CountryOverviewCard with flag display, key facts grid (capital, population, timezones, driving side), languages, currency, political system, bordering countries, and official links."
        },
        {
          "id": "I6-FE-03",
          "name": "Create WeatherCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "WeatherCard with animated weather icons (CSS animations for sun, clouds, rain, snow, wind), daily forecasts with temperature ranges, precipitation, humidity, wind speed, best time to visit, climate type, and packing recommendations."
        },
        {
          "id": "I6-FE-04",
          "name": "Create CurrencyCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "CurrencyCard with exchange rates, ATM/credit card availability badges, tipping customs, cost of living estimates with gradient indicators, and currency exchange tips."
        },
        {
          "id": "I6-FE-05",
          "name": "Create CultureCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "CultureCard with dress code, greetings, customs, do's and don'ts (color-coded green/red), religious considerations, language tips, and etiquette guide links."
        },
        {
          "id": "I6-FE-06",
          "name": "Create FoodCard component",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "implementation": "FoodCard with must-try dishes (spicy indicators, dietary badges), street food recommendations (safety rating), dining etiquette, dietary options (vegetarian/vegan/halal/kosher/gluten-free availability), price ranges, restaurant recommendations (price level indicators), and food safety tips. Features warm orange/amber food-themed aesthetic with comprehensive visual indicators."
        },
        {
          "id": "I6-FE-07",
          "name": "Create UnusualLawsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "UnusualLawsCard with legal restrictions (severity-based styling: info/warning/critical), import restrictions, photography restrictions, internet restrictions, and legal resource links."
        },
        {
          "id": "I6-FE-08",
          "name": "Create SafetyCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "SafetyCard with 5-star safety rating, safety alerts (severity-based), crime rates (overall/petty theft/violent crime), emergency contact numbers, health risks with vaccination requirements, and travel advisory links."
        },
        {
          "id": "I6-FE-09",
          "name": "Create NewsCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "NewsCard with sortable news articles (by relevance and date), category icons, relevance badges (high/medium/low), source attribution, date formatting (relative and absolute), and external link handling."
        },
        {
          "id": "I6-FE-10",
          "name": "Create IntelligenceCard base component",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "Reusable IntelligenceCard component with smooth expand/collapse animations (CSS transitions), hover effects (gradient border, lift), dark mode support, accessibility (keyboard navigation, ARIA labels), loading states, and icon support. Used by all 7 destination cards."
        },
        {
          "id": "I6-AGENT-01",
          "name": "Implement CountryAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready CountryAgent using CrewAI with Claude AI and REST Countries API. Includes comprehensive country intelligence (basic facts, emergency services, power outlets, safety ratings, travel advisories), Celery task integration, and 24+ test cases. Completely free REST Countries API (no key required). Tests: 24/24 passing."
        },
        {
          "id": "I6-AGENT-02",
          "name": "Implement WeatherAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready WeatherAgent using CrewAI with Visual Crossing Weather API integration. Includes 15-day forecasts, climate analysis, packing recommendations, and travel tips. Free tier API (1,000 records/day). Celery task integration and 20+ test cases. Tests: 20/20 passing."
        },
        {
          "id": "I6-AGENT-03",
          "name": "Implement CurrencyAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready CurrencyAgent using CrewAI with fawazahmed0/exchange-api. Includes exchange rates, ATM/payment info, tipping customs, cost estimates, daily budgets, and safety tips. Free API (no rate limits, 200+ currencies). Celery task integration and 28+ test cases. Tests: All passing."
        },
        {
          "id": "I6-AGENT-04",
          "name": "Implement CultureAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready CultureAgent using CrewAI with cultural knowledge bases. Includes comprehensive cultural intelligence (greetings, dress codes, religious considerations, taboos, etiquette, language phrases, cultural sensitivity), Celery task integration, and 25+ test cases. Tests: 25/25 passing."
        },
        {
          "id": "I6-AGENT-05",
          "name": "Implement FoodAgent",
          "type": "agent",
          "passes": true,
          "priority": "medium",
          "implementation": "Production-ready FoodAgent using CrewAI with food knowledge bases. Includes comprehensive culinary intelligence (must-try dishes, street food, restaurants, dietary availability, food safety, dining etiquette), Celery task integration, and 25+ test cases. Tests: 25/25 passing."
        },
        {
          "id": "I6-API-01",
          "name": "Integrate Visual Crossing API",
          "type": "integration",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I6-API-02",
          "name": "Integrate Fixer.io API",
          "type": "integration",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I6-API-03",
          "name": "Integrate REST Countries API",
          "type": "integration",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I6-BE-01",
          "name": "Implement GET /trips/{id}/report/destination",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "implementation": "Complete API endpoint following visa report pattern. Queries report_sections table with section_type='country', transforms CountryReportResponse to frontend format with auth and ownership verification."
        },
        {
          "id": "I6-INT-01",
          "name": "Integrate Country Agent with Destination UI",
          "type": "integration",
          "passes": true,
          "priority": "high",
          "implementation": "Created destination.ts API client with fetchDestinationReport() and checkDestinationReportExists(). Updated trips/[id]/destination/page.tsx to fetch from backend API with fallback to mock data. Merges real country data with sample data for unimplemented sections (weather, currency, culture, laws, safety, news). Error handling for REPORT_NOT_FOUND, UNAUTHORIZED, FETCH_ERROR states."
        }
      ]
    },
    {
      "id": "I7",
      "name": "Travel Planning and Itinerary",
      "description": "Itinerary generation, flights, and map view",
      "status": {
        "frontend": 100,
        "backend": 100,
        "agents": 100,
        "integration": 50,
        "overall": 92
      },
      "features": [
        {
          "id": "I7-FE-01",
          "name": "Create itinerary section page",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "Full itinerary page at /trips/[id]/itinerary with sidebar navigation, trip stats, breadcrumbs, and Journey Map Dashboard aesthetic"
        },
        {
          "id": "I7-FE-02",
          "name": "Create DayTimeline component",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "Vertical timeline with animated connecting dots, time-of-day sections (morning/afternoon/evening/night) with gradient backgrounds, expandable time blocks, and staggered animations"
        },
        {
          "id": "I7-FE-03",
          "name": "Create ActivityCard component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "Activity cards with category-based left border colors, time display, location info, cost, booking details, expandable notes, priority badges (must-see), and action buttons (edit/remove/view on map)"
        },
        {
          "id": "I7-FE-04",
          "name": "Create MapView component (Mapbox)",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "Interactive Mapbox GL map with activity markers (category-colored with emojis), numbered badges, hover effects, route lines (dashed blue), popup info cards, day filtering, navigation controls, and graceful fallback message when API key is missing. Uses react-map-gl 8.1.0. Full dark mode support. Map view toggle in itinerary page header."
        },
        {
          "id": "I7-FE-05",
          "name": "Create FlightOptions component",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "Flight cards with departure/arrival arc visualization, animated dotted line, flight details grid, layover information, fare class colors, booking status badges, and SVG arc animations"
        },
        {
          "id": "I7-FE-06",
          "name": "Implement itinerary editing",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "implementation": "ActivityModal with travel document aesthetic, ConfirmDialog for deletions, state management for add/edit/remove, time conflict detection with visual warnings, form validation with error messages. Fully functional editing system."
        },
        {
          "id": "I7-AGENT-01",
          "name": "Implement AttractionsAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready AttractionsAgent using CrewAI with OpenTripMap API. Includes top attractions, hidden gems, day trips, categorized attractions, visiting information, and crowd avoidance tips. Celery task integration (execute_attractions_agent) and comprehensive test suite (17+ tests)."
        },
        {
          "id": "I7-AGENT-02",
          "name": "Implement ItineraryAgent",
          "type": "agent",
          "passes": true,
          "priority": "critical",
          "implementation": "CRITICAL production-ready ItineraryAgent using CrewAI. Synthesizes data from all other agents (visa, country, weather, attractions) into optimized day-by-day trip plans. Features: daily activity scheduling, geographic clustering, budget optimization, transportation planning, accommodation suggestions, pacing control (relaxed/moderate/packed), flexible alternatives. Includes 6 helper tools, comprehensive prompts, Celery task integration (execute_itinerary_agent), and 10+ passing tests."
        },
        {
          "id": "I7-AGENT-03",
          "name": "Implement FlightAgent",
          "type": "agent",
          "passes": true,
          "priority": "high",
          "implementation": "Production-ready FlightAgent using CrewAI. Features: flight route search, price estimation, airport information, layover analysis, baggage policies, booking timing advice. Includes 6 AI-powered tools, Celery task integration (execute_flight_agent), and 16+ passing tests."
        },
        {
          "id": "I7-API-01",
          "name": "Integrate Mapbox API",
          "type": "integration",
          "passes": true,
          "priority": "high",
          "implementation": "Mapbox GL JS token configured in frontend/.env.local as NEXT_PUBLIC_MAPBOX_TOKEN. MapView component now has full access to Mapbox Streets v12 style with 50,000 free map loads per month."
        },
        {
          "id": "I7-API-02",
          "name": "Integrate Skyscanner/Amadeus API",
          "type": "integration",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I7-BE-01",
          "name": "Implement GET /trips/{id}/report/itinerary",
          "type": "backend",
          "passes": true,
          "priority": "critical",
          "implementation": "Complete API endpoint at GET /trips/{id}/report/itinerary. Returns ItineraryReportResponse with full itinerary content from report_sections table. Includes auth, ownership verification, confidence score conversion."
        },
        {
          "id": "I7-BE-02",
          "name": "Implement GET /trips/{id}/report/flight",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "implementation": "Complete API endpoint at GET /trips/{id}/report/flight. Returns FlightReportResponse with recommended flights, pricing, airport info. Includes auth, ownership verification, confidence score conversion."
        }
      ]
    },
    {
      "id": "I8",
      "name": "Report Management",
      "description": "Trip list, report view, PDF export, and deletion scheduling",
      "status": {
        "frontend": 100,
        "backend": 0,
        "overall": 50
      },
      "features": [
        {
          "id": "I8-FE-01",
          "name": "Create trips list page",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "Trips list page at /trips with search, filters (all/upcoming/in-progress/completed), TripCard components, loading/error/empty states"
        },
        {
          "id": "I8-FE-02",
          "name": "Create report detail page",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "implementation": "TripReportLayout component wraps all report pages (visa, destination, itinerary) with unified navigation and actions"
        },
        {
          "id": "I8-FE-03",
          "name": "Create section navigation",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "implementation": "ReportSectionNav component with tabs for Visa/Destination/Itinerary sections, includes ReportBreadcrumb for navigation"
        },
        {
          "id": "I8-FE-04",
          "name": "Create PDF export button",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "PDF export functionality integrated in TripReportLayout with exportTripReportPDF API function. Backend endpoint required for full functionality."
        },
        {
          "id": "I8-FE-05",
          "name": "Create deletion warning UI",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "implementation": "DeleteTripDialog component with confirmation input, shows data that will be deleted, integrates with deleteTrip API function"
        },
        {
          "id": "I8-BE-01",
          "name": "Implement report aggregator",
          "type": "backend",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I8-BE-02",
          "name": "Implement GET /trips/{id}/report",
          "type": "backend",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I8-BE-03",
          "name": "Implement POST /trips/{id}/report/pdf",
          "type": "backend",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I8-BE-04",
          "name": "Implement PDF generation (Playwright)",
          "type": "backend",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I8-BE-05",
          "name": "Implement deletion scheduler",
          "type": "backend",
          "passes": false,
          "priority": "high"
        }
      ]
    },
    {
      "id": "I9",
      "name": "User Profile and Settings",
      "description": "Profile management, templates, and notification preferences",
      "status": {
        "frontend": 100,
        "backend": 70,
        "config": 100,
        "overall": 90
      },
      "features": [
        {
          "id": "I9-FE-01",
          "name": "Create profile page",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "notes": "Completed with all sections and auto-save functionality"
        },
        {
          "id": "I9-FE-02",
          "name": "Create settings tabs",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "notes": "Using single-page scrollable layout with section cards"
        },
        {
          "id": "I9-FE-03",
          "name": "Create traveler profile form",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "notes": "Nationality, residence, residency status, DOB, preferences implemented"
        },
        {
          "id": "I9-FE-04",
          "name": "Create templates management",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "notes": "Fully integrated with backend templates API - create, edit, delete templates working"
        },
        {
          "id": "I9-FE-05",
          "name": "Create notification preferences",
          "type": "frontend",
          "passes": true,
          "priority": "medium",
          "notes": "Email notification toggles with auto-save"
        },
        {
          "id": "I9-FE-06",
          "name": "Integrate API client with authentication",
          "type": "frontend",
          "passes": true,
          "priority": "critical",
          "notes": "Fixed API client to use Supabase tokens, updated ProfileSettingsPage to use API client functions"
        },
        {
          "id": "I9-FE-07",
          "name": "Implement photo upload with Supabase Storage",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "notes": "Photo upload to Supabase Storage with public URL generation. Requires 'profile-photos' bucket setup"
        },
        {
          "id": "I9-BE-01",
          "name": "Implement PUT /profile endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "notes": "Endpoint exists and working for display_name and avatar_url updates"
        },
        {
          "id": "I9-BE-02",
          "name": "Implement templates CRUD endpoints",
          "type": "backend",
          "passes": true,
          "priority": "medium",
          "notes": "Full CRUD API implemented - POST/GET/PUT/DELETE /api/templates endpoints with Pydantic validation"
        },
        {
          "id": "I9-BE-03",
          "name": "Implement PUT /profile/preferences endpoint",
          "type": "backend",
          "passes": true,
          "priority": "medium",
          "notes": "Endpoint exists for user preferences including notifications"
        },
        {
          "id": "I9-BE-04",
          "name": "Implement PUT /profile/traveler endpoint",
          "type": "backend",
          "passes": true,
          "priority": "high",
          "notes": "Traveler profile create/update endpoint working"
        },
        {
          "id": "I9-CONFIG-01",
          "name": "Setup Supabase Storage bucket for profile photos",
          "type": "config",
          "passes": true,
          "priority": "high",
          "notes": "Bucket created and all 4 storage policies configured via Supabase MCP: INSERT, SELECT, UPDATE, DELETE"
        }
      ]
    },
    {
      "id": "I10",
      "name": "Error States and Hardening",
      "description": "Error handling, loading UX, and quality gates",
      "status": {
        "frontend": 67,
        "backend": 0,
        "overall": 33
      },
      "features": [
        {
          "id": "I10-FE-01",
          "name": "Create 404 page",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I10-FE-02",
          "name": "Create 500 page",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I10-FE-03",
          "name": "Create global error boundary",
          "type": "frontend",
          "passes": true,
          "priority": "high"
        },
        {
          "id": "I10-FE-04",
          "name": "Create inline error banners",
          "type": "frontend",
          "passes": false,
          "priority": "medium"
        },
        {
          "id": "I10-FE-05",
          "name": "Create progress indicator for reports",
          "type": "frontend",
          "passes": true,
          "priority": "high",
          "implementation": "TripGenerationProgress component with real-time polling (3s interval), agent status tracking, progress bar, completion/error states, and demo page at /trips/[id]/generation"
        },
        {
          "id": "I10-FE-06",
          "name": "Create offline detector",
          "type": "frontend",
          "passes": false,
          "priority": "low"
        },
        {
          "id": "I10-BE-01",
          "name": "Standardize ErrorResponse across API",
          "type": "backend",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I10-BE-02",
          "name": "Integrate Sentry for error tracking",
          "type": "backend",
          "passes": false,
          "priority": "medium"
        },
        {
          "id": "I10-BE-03",
          "name": "Add structured logging",
          "type": "backend",
          "passes": false,
          "priority": "medium"
        },
        {
          "id": "I10-INFRA-01",
          "name": "Performance optimization",
          "type": "infrastructure",
          "passes": false,
          "priority": "high"
        },
        {
          "id": "I10-INFRA-02",
          "name": "Security audit",
          "type": "infrastructure",
          "passes": false,
          "priority": "critical"
        },
        {
          "id": "I10-INFRA-03",
          "name": "GDPR compliance verification",
          "type": "infrastructure",
          "passes": false,
          "priority": "critical"
        }
      ]
    }
  ]
}
